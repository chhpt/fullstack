---
id: permission
title: 权限
---

## 用户与用户组

Linux 是一个多用户操作系统。

## 用户管理命令

## 文件权限

通过 `ls -l` 命令可以查看文件列表，并显示文件的详细信息，其中就包括了文件的权限信息。
Z

```sh
-rw-r--r-- 1 ubuntu ubuntu  3970 Nov 16 18:54 .bashrc
```

上面各个字段的含义：

![](pics/perms.png)

#### 文档类型部分

第一个字段的第一个字符表示的是文档的类型。

- 当为「d」时表示目录
- 当为「-」时表示文件
- 当为「l」时表示为链接文件（link file）
- 当为「c」时表示串行端口字符设备文件
- 当为「b」时表示可供存储的块设备，例如键盘、鼠标（一次性读取设备）。

#### 权限

接下来的字符中，以三个为一组，且均为 `rwx` 的三个参数的组合。每个字符的含义分别为：「r」表示只读，即 read；「w」表示可写，即 write；「x」表示可执行，即 execute；「-」表示无此权限，即为空。

**要注意的是，这三个权限的位置不会改变，如果没有权限，则表示为减号「-」。**

这三组字符由左到分别表示**文件拥有者**，**文件所属群组**，**其他用户**对此文件的操作权限。

#### 文档链接

第二个字段显示的是文档的链接数，这个链接数就是硬链接的概念，即多少个文件指向同一个 inode。

#### 用户和用户组

第三和第四个字段分别表示这个文件的拥有者以及这个文件的所属群组。

#### 文件信息

最后 3 个字段的含义很简单，分别表示文件大小（默认单位为 Bytes），最后修改时间，文件名。如果文件名之前多一个“ . ”，则代表这个文件为隐藏文件。

## 修改文件属性与权限

### 改变文件所属群组 - chgrp

`chgrp` 是 change group 的缩写，当需改文件所属群组时，要被改变的群组名称必须要在 `/etc/group` 文件内存在才行。

```sh
chgrp [-R] dirname/filename
```

### 改变文件拥有者 - chown

`chown` 是 change owner 的缩写，`chown` 不仅可以修改文件的所属用户，也可以修改文件所属的群组，当需改文件所属用户时，要被改变用户必须要在 `/etc/passwd` 文件中存在，同理，当需改文件所属群组时，要被改变的群组名称必须要在 `/etc/group` 文件中存在。

```sh
chown [-R] 帐号名称:群组名称 文件或目录
```

### 改变文件的权限 - chmod

文件权限的改变使用的是 `chmod` 这个指令，权限的设置方法有两种，分别可以使用数字或者是符号来进行权限的变更。

#### 数字类型

Linux 文件的基本权限就有九个，分别是 owner/group/others 三种身份各有自己的 read/write/execute 权限。其中，我们可以使用数字来代表各个权限，各权限的分数对照表如下：`r:4, w:2, x:1`。每种身份（owner/group/others）各自的三个权限（r/w/x）分数是需要累加的，例如当权限为：[-rwxrwx---] 分数则是：

- owner = rwx = 4+2+1 = 7
- group = rwx = 4+2+1 = 7
- others= --- = 0+0+0 = 0

所以该文件的权限数字就是 770。

```sh
chmod 777 .bashrc
```

#### 符号类型

基本语法

```sh
chomd [-R] mode file
```

mode 是由一些表示操作对象，操作符号以及权限（rwx）的字符组成的：

- u 表示「用户」（user），即文件或目录的所有者。
- g 表示「用户组」（group），即文件或目录所属的用户组。
- o 表示「其他用户」。（others）
- a 表示「所有用户」（all）。它是系统默认值。
- 「+」表示添加某个权限。
- 「−」表示取消某个权限。
- 「=」表示赋予给定的权限，同时取消文档以前的所有权限。

```sh
chmod u=rwx,go=rx .bashrc
```

### 相关文章

- [理解 inode](http://www.ruanyifeng.com/blog/2011/12/inode.html)
