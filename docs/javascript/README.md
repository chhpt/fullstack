# JavaScript

## 严格模式

`use strict;` 将使 JS 代码以严格模式（strict mode）运行。

设立 "严格模式" 的目的，主要有以下几个：

- 消除 Javascript 语法的一些不合理、不严谨之处，减少一些怪异行为
- 消除代码运行的一些不安全之处，保证代码运行的安全
- 提高编译器效率，增加运行速度
- 为未来新版本的 Javascript 做好铺垫

"严格模式" 体现了 Javascript 更合理、更安全、更严谨的发展方向，包括 IE 10 在内的主流浏览器，都已经支持它，许多大项目已经开始全面拥抱它。

另一方面，同样的代码，在 "严格模式" 中，可能会有不一样的运行结果。一些在 "正常模式" 下可以运行的语句，在 "严格模式" 下将不能运行。

- 全局变量显式声明：在正常模式中，如果一个变量没有声明就赋值，默认是全局变量。严格模式禁止这种用法，全局变量必须显式声明。
- 静态绑定：禁止使用 with 语句；创设 eval 作用域。
- 禁止 this 关键字指向全局对象，而是报错。
- 严格模式要求函数的参数名唯一，否则报错。
- 无法删除变量：只有 configurable 为 true 的对象属性，才能被删除。
- 禁止八进制数表示法：整数第一位为 0，将报错。
- 不允许对 arguments 赋值；arguments 不再追踪参数的变化。
- 通过 this 传递给一个函数的值不会被强制转换为一个对象；非严格模式下，则指定为 null 或 undefined 时会自动指向全局对象（使用 call, apply 或 bind 方法），同时为原始值（数字，字符串，布尔值）的 this 会指向其自动包装对象。
- 新增了一些保留字：implements, interface, let, package, private, protected, public, static 等。

## JavaScript 延迟加载

有些 JS 代码并非页面初始化的时候就立刻需要的，而是稍后某些情况才需要的。

- 异步加载的方案：动态插入 script 标签
- 通过 ajax 获取代码，然后通过 `eval` 执行（不推荐，不安全，非常耗性能）
- script 标签上添加 defer 或 async 属性
- 创建并插入 iframe，让它异步执行 JS

## for...in 和 for...of

1.  推荐在循环对象属性的时候，使用`for...in`，在遍历数组的时候的时候使用`for...of`。
2.  `for...in`循环出的是 key，`for...of`循环出的是 value
3.  注意，`for...of`是 ES6 新引入的特性。修复了 ES5 引入的`for...in`的不足。
4.  `for...of` 不能循环普通的对象（报错），需要通过和`Object.keys()`搭配使用。
